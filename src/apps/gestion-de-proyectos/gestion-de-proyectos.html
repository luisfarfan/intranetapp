<h1 class="page-title">SEGURIDAD - <span class="fw-semi-bold">Gestion de Proyectos</span></h1>
<div class="row">
    <div class="col-lg-12">
        <section class="widget">
            <div class="widget-body">
                <form class="form-horizontal form-label-left" role="form">
                    <fieldset>
                        <legend>Proyectos Disponibles</legend>
                        <div class="form-group row">
                            <div class="col-md-8 col-xs-12">
                                <select (change)="cargarProyectosSigaDetail($event.target.value)" class="select2 form-control" id="default-select">
                                    <option value="0">Seleccione Proyecto</option>
                                    <option *ngFor="let proyecto of sigaInterface"  value="{{proyecto.id_proyecto}}" >{{ proyecto.desc_proyecto }}</option>
                                </select>
                            </div>
                        </div>
                    </fieldset>
                </form>
                <button *ngIf="ifhay" (click)="addProyectosSigatoSeguridad()" class="btn btn-success width-100 mb-xs" role="button">Agregar</button>
                <table class="table table-bordered table-lg mt-lg mb-0">
                    <thead>
                        <tr>
                            <th class="hidden-xs-down">#</th>
                            <th>Descripcion</th>
                            <th>Codigo Meta</th>
                            <th>Modalidad</th>
                            <th class="hidden-xs-down">CODI_DEPE_TDE</th>
                            <th class="hidden-xs-down">Año Meta</th>
                            <th>Objetivo</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="ifhay">
                        <tr>
                            <td>{{ proyectosdetail.id_proyecto }}</td>
                            <td>{{ proyectosdetail.desc_proyecto }}</td>
                            <td>{{ proyectosdetail.codi_Meta}}</td>
                            <td>{{ proyectosdetail.modalidad }}</td>
                            <td>{{ proyectosdetail.CODI_DEPE_TDE }}</td>
                            <td>{{ proyectosdetail.annio_meta }}</td>
                            <td>{{ proyectosdetail.objetivo }}</td>
                        </tr>
                    </tbody>

                </table>

            </div>
        </section>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <section class="widget">
            <header>
                <h5>Lista de <span class="fw-semi-bold">Proyectos</span>
                </h5>
            </header>
            <div class="widget-body">

                <form class="navbar-form pull-xs-left" role="search">
                    <div class="form-group">
                        <div class="input-group input-group-no-border">
                            <span class="input-group-addon">
                        <i class="fa fa-search"></i>
                    </span>
                            <input #gb type="text" pInputText size="50" class="form-control" placeholder="Buscador Global">
                        </div>
                    </div>
                </form>
                <p-dataTable [value]="proyectos_seguridad" [(selection)]="selectedSeguridad" (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)" [rows]="10" [paginator]="true" [globalFilter]="gb" class="table table-bordered table-lg">
                    <footer>
                        <div class="row">
                            <p class="text-align-center">
                                <button class="btn btn-success" [disabled]="disabled>1" data-toggle="modal" data-target="#modal_add_sistema" (click)="getDiffSistemas()" role="button">
                           Asignar Sistemas
                        </button>
                                <button class="btn btn-warning" role="button" [disabled]="disabled>1"> 
                            Editar
                        </button>
                                <button class="btn btn-danger" (click)="deleteProyectos()" role="button">
                            Eliminar
                        </button>
                            </p>
                        </div>
                    </footer>
                    <p-column [style]="{'width':'38px'}" selectionMode="multiple"></p-column>
                    <p-column field="sigla_proy" header="Sigla (startsWith)" [filter]="true"></p-column>
                    <p-column field="des_proy" header="Descripcion (contains)" [filter]="true" filterMatchMode="contains"></p-column>
                    <p-column field="anio_proy" header="Año (startsWith)" [filter]="true"></p-column>
                    <p-column field="fec_final" header="FechaFin (endsWith)" [filter]="true" filterMatchMode="endsWith"></p-column>
                </p-dataTable>
            </div>
        </section>
    </div>
</div>

<div class="modal fade" id="modal_add_sistema">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title text-xs-center fw-bold mt" id="myModalLabel18">Sistemas</h4>
                <p class="text-xs-center fs-mini text-muted mt-sm">
                </p>
            </div>
            <section class="widget" widget>
                <div class="widget-body">
                    <div class="row">
                        <div class="col-md-6">
                            <table *ngIf="disabled>0" class="table table-bordered">
                                <thead>
                                    <tr>
                                        <th>Codigo Sistema</th>
                                        <th>Descripcion</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let sistema of selectedSeguridad[0].sistemas">
                                        <td>{{ sistema.id_sistema }}</td>
                                        <td>{{ sistema.des_sist }}</td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>
                        <div class="col-md-6">
                            <p-dataTable [value]="diffsistemas" [(selection)]="selectedSistemas">
                                <p-column [style]="{'width':'38px'}" selectionMode="multiple"></p-column>
                                <p-column field="id_sistema" [filter]="true"></p-column>
                                <p-column field="des_sist" [filter]="true"></p-column>
                            </p-dataTable>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-gray" data-dismiss="modal">Close</button>
                        <button type="button" (click)="addSistemas()" class="btn btn-success">Guardar</button>
                    </div>
                </div>
            </section>

        </div>
    </div>
</div>